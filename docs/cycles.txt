== Основные понятия

Под проектом (*project*) понимается совокупность проектных библиотек (*libs*), 
хранящиеся в репозитории и проектной сборки (*project_build*).

При установке проекта (*setup*) при помощи *Haru* (команда get-build) создается директория, в которую складывается
проектная сборка (*project_build*), и при помощи настроек этой сборки устанавливаются необходимые библиотеки,
конфигурируется проект.

.Итого
- **Haru** - главные инструкции по установке проекта
- **projeсt_build** - свойства проекта и дополнительные инструкции phing
- **project_lib** - проектная библиотека содержит необходимые директории и код, который хранится в репозитории
- **project** - "установленный" на платформе программный продукт
              
image:docs/images/haru_common.jpg[Haru common]

=== Циклы

==== Создание проекта
Создаем проект и сохраняем его в репозиторий для совместной разработки, возможно нам понадобится отменить правку.
Каждый разработчик работает со своей копией проекта, либо один и тот же человек за разными компьютерами.

==== Установка/выкат (deploy) проекта
При установке проекта мы указываем каталог хранения, помимо этого нам обычно необходимо изменить множество параметров
проекта (конфигурационные данные). Например: путь до исполняемого файла php, параметры соединения к БД, опции php.ini, 
имя тега/бранча lib.

Эти параметры зависят от типа платформы (на test одни параметры подлючения, на develop другие).
Помимо свойств зависящих от платформы имеется возможность расширить свойства пользовательским файлом. 
В частности, это очень полезно для develop платформы, когда над одним проектом работают несколько разработчиков.  

Установка новой версии продукта происходит так: 
- загружаются новые версии библиотек (lib) в отдельную директорию
- генерируются файлы из шаблонов
- переключаются symlink
- в случае, если нужно отменить выкат новой версии, переключаем symlink

image:docs/images/haru_change_ver.jpg[Haru change version]

[NOTE]
*Вопрос:* Почему symlink, а не просто обновление репозитория?  
*Ответ:* Так как помимо кода хранящегося в репозитории в папке библиотеки проекта 
хранятся файлы сгенеренные из шаблонов. Также обновление может занимать длительное время, 
переключение symlink работает быстрее.

==== Разработка
Разработчик имеет свою копию проекта. Настройки (конфигурационные данные) собственной копии расширяются 
в пользовательском файле 'build/properties/extends/users/<username>.xml', которые не сохраняются в репозиторий, 
так как содержит некоторые конфиденциальные данные.

Для разработки обычно создают отдельную ветку проекта (branch). После создания ветки, необходимо внести изменения 
в пользовательский файл настроек и переустановить проект.

